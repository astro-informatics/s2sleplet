<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>sleplet.scripts.plotting_on_sphere API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>sleplet.scripts.plotting_on_sphere</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">#!/usr/bin/env python
from argparse import ArgumentParser, Namespace

import numpy as np
import pyssht as ssht
from numpy import typing as npt

from sleplet import logger
from sleplet.functions.coefficients import Coefficients
from sleplet.plotting.create_plot_sphere import Plot
from sleplet.utils.class_lists import COEFFICIENTS, MAPS_LM
from sleplet.utils.config import settings
from sleplet.utils.harmonic_methods import (
    rotate_earth_to_africa,
    rotate_earth_to_south_america,
)
from sleplet.utils.mask_methods import create_default_region
from sleplet.utils.plot_methods import calc_nearest_grid_point
from sleplet.utils.slepian_methods import slepian_forward, slepian_inverse
from sleplet.utils.string_methods import (
    convert_classes_list_to_snake_case,
    filename_angle,
)
from sleplet.utils.vars import (
    ALPHA_DEFAULT,
    ANNOTATION_COLOUR,
    ARROW_STYLE,
    BETA_DEFAULT,
    SAMPLING_SCHEME,
)


def valid_maps(map_name: str) -&gt; str:
    &#34;&#34;&#34;
    check if valid map
    &#34;&#34;&#34;
    if map_name in convert_classes_list_to_snake_case(MAPS_LM):
        return map_name
    else:
        raise ValueError(f&#34;{map_name} is not a valid map to convolve&#34;)


def valid_plotting(func_name: str) -&gt; str:
    &#34;&#34;&#34;
    check if valid function
    &#34;&#34;&#34;
    if func_name in convert_classes_list_to_snake_case(COEFFICIENTS):
        return func_name
    else:
        raise ValueError(f&#34;{func_name} is not a valid function to plot&#34;)


def read_args() -&gt; Namespace:
    &#34;&#34;&#34;
    method to read args from the command line
    &#34;&#34;&#34;
    parser = ArgumentParser(description=&#34;Create SSHT plot&#34;)
    parser.add_argument(
        &#34;function&#34;,
        type=valid_plotting,
        choices=convert_classes_list_to_snake_case(COEFFICIENTS),
        help=&#34;function to plot on the sphere&#34;,
    )
    parser.add_argument(
        &#34;--alpha&#34;,
        &#34;-a&#34;,
        type=float,
        default=ALPHA_DEFAULT,
        help=f&#34;alpha/phi pi fraction - defaults to {ALPHA_DEFAULT}&#34;,
    )
    parser.add_argument(
        &#34;--bandlimit&#34;, &#34;-L&#34;, type=int, default=settings[&#34;L&#34;], help=&#34;bandlimit&#34;
    )
    parser.add_argument(
        &#34;--beta&#34;,
        &#34;-b&#34;,
        type=float,
        default=BETA_DEFAULT,
        help=f&#34;beta/theta pi fraction - defaults to {BETA_DEFAULT}&#34;,
    )
    parser.add_argument(
        &#34;--convolve&#34;,
        &#34;-c&#34;,
        type=valid_maps,
        default=None,
        choices=convert_classes_list_to_snake_case(MAPS_LM),
        help=&#34;glm to perform sifting convolution with i.e. flm x glm*&#34;,
    )
    parser.add_argument(
        &#34;--extra_args&#34;,
        &#34;-e&#34;,
        type=int,
        nargs=&#34;+&#34;,
        help=&#34;list of extra args for functions&#34;,
    )
    parser.add_argument(
        &#34;--gamma&#34;,
        &#34;-g&#34;,
        type=float,
        default=0,
        help=&#34;gamma pi fraction - defaults to 0 - rotation only&#34;,
    )
    parser.add_argument(
        &#34;--method&#34;,
        &#34;-m&#34;,
        type=str,
        nargs=&#34;?&#34;,
        default=&#34;north&#34;,
        const=&#34;north&#34;,
        choices=[&#34;north&#34;, &#34;rotate&#34;, &#34;translate&#34;],
        help=&#34;plotting routine: defaults to north&#34;,
    )
    parser.add_argument(&#34;--noise&#34;, &#34;-n&#34;, type=int, help=&#34;the SNR_IN of the noise level&#34;)
    parser.add_argument(
        &#34;--outline&#34;,
        &#34;-o&#34;,
        action=&#34;store_false&#34;,
        help=&#34;flag which removes any annotation&#34;,
    )
    parser.add_argument(
        &#34;--region&#34;,
        &#34;-r&#34;,
        action=&#34;store_true&#34;,
        help=&#34;flag which masks the function for a region (based on settings.toml)&#34;,
    )
    parser.add_argument(
        &#34;--smoothing&#34;,
        &#34;-s&#34;,
        type=int,
        help=&#34;the scaling of the sigma in Gaussian smoothing of the Earth&#34;,
    )
    parser.add_argument(
        &#34;--type&#34;,
        &#34;-t&#34;,
        type=str,
        nargs=&#34;?&#34;,
        default=&#34;real&#34;,
        const=&#34;real&#34;,
        choices=[&#34;abs&#34;, &#34;real&#34;, &#34;imag&#34;, &#34;sum&#34;],
        help=&#34;plotting type: defaults to real&#34;,
    )
    parser.add_argument(
        &#34;--unnormalise&#34;,
        &#34;-u&#34;,
        action=&#34;store_true&#34;,
        help=&#34;flag turns off normalisation for plot&#34;,
    )
    parser.add_argument(
        &#34;--unzeropad&#34;,
        &#34;-z&#34;,
        action=&#34;store_true&#34;,
        help=&#34;flag turns off upsampling for plot&#34;,
    )
    parser.add_argument(
        &#34;--view&#34;,
        &#34;-v&#34;,
        type=str,
        nargs=&#34;?&#34;,
        default=&#34;south_america&#34;,
        const=&#34;south_america&#34;,
        choices=[&#34;africa&#34;, &#34;south_america&#34;],
        help=&#34;view of Earth: defaults to &#39;south_america&#39;&#34;,
    )
    return parser.parse_args()


def plot(
    f: Coefficients,
    g: Coefficients | None,
    *,
    alpha_pi_frac: float,
    beta_pi_frac: float,
    gamma_pi_frac: float,
    annotations: bool,
    normalise: bool,
    method: str,
    plot_type: str,
    upsample: bool,
    earth_view: str,
    amplitude: float | None,
) -&gt; None:
    &#34;&#34;&#34;
    master plotting method
    &#34;&#34;&#34;
    filename = f.name
    coefficients = f.coefficients

    # turn off annotation if needed
    logger.info(f&#34;annotations on: {annotations}&#34;)
    annotation = []

    # Shannon number for Slepian coefficients
    shannon = f.slepian.N if hasattr(f, &#34;slepian&#34;) else None

    logger.info(f&#34;plotting method: &#39;{method}&#39;&#34;)
    match method:
        case &#34;rotate&#34;:
            coefficients, filename = _rotation_helper(
                f, filename, alpha_pi_frac, beta_pi_frac, gamma_pi_frac
            )
        case &#34;translate&#34;:
            coefficients, filename, trans_annotation = _translation_helper(
                f, filename, alpha_pi_frac, beta_pi_frac, shannon
            )

            # annotate translation point
            if annotations:
                annotation.append(trans_annotation)

    if g is not None:
        coefficients, filename = _convolution_helper(
            f, g, coefficients, shannon, filename
        )

    # rotate plot of Earth
    if &#34;earth&#34; in filename:
        match earth_view:
            case &#34;africa&#34;:
                coefficients = rotate_earth_to_africa(coefficients, f.L)
                filename += &#34;_africa&#34;
            case &#34;south_america&#34;:
                coefficients = rotate_earth_to_south_america(coefficients, f.L)

    # get field value
    field = _coefficients_to_field(f, coefficients)

    # do plot
    Plot(
        field,
        f.L,
        filename,
        amplitude=amplitude,
        annotations=annotation,
        normalise=normalise,
        plot_type=plot_type,
        reality=f.reality,
        region=f.region if hasattr(f, &#34;slepian&#34;) else None,
        spin=f.spin,
        upsample=upsample,
    ).execute()


def _rotation_helper(
    f: Coefficients,
    filename: str,
    alpha_pi_frac: float,
    beta_pi_frac: float,
    gamma_pi_frac: float,
) -&gt; tuple[npt.NDArray[np.complex_], str]:
    &#34;&#34;&#34;
    performs the rotation specific steps
    &#34;&#34;&#34;
    logger.info(
        &#34;angles: (alpha, beta, gamma) = &#34;
        f&#34;({alpha_pi_frac}, {beta_pi_frac}, {gamma_pi_frac})&#34;
    )
    filename += f&#34;_rotate_{filename_angle(alpha_pi_frac, beta_pi_frac, gamma_pi_frac)}&#34;

    # calculate angles
    alpha, beta = calc_nearest_grid_point(f.L, alpha_pi_frac, beta_pi_frac)
    gamma = gamma_pi_frac * np.pi

    # rotate by alpha, beta, gamma
    coefficients = f.rotate(alpha, beta, gamma=gamma)
    return coefficients, filename


def _translation_helper(
    f: Coefficients,
    filename: str,
    alpha_pi_frac: float,
    beta_pi_frac: float,
    shannon: int | None,
) -&gt; tuple[npt.NDArray[np.complex_ | np.float_], str, dict]:
    &#34;&#34;&#34;
    performs the translation specific steps
    &#34;&#34;&#34;
    logger.info(f&#34;angles: (alpha, beta) = ({alpha_pi_frac}, {beta_pi_frac})&#34;)
    # don&#39;t add gamma if translation
    filename += f&#34;_translate_{filename_angle(alpha_pi_frac, beta_pi_frac)}&#34;

    # calculate angles
    alpha, beta = calc_nearest_grid_point(f.L, alpha_pi_frac, beta_pi_frac)

    # translate by alpha, beta
    coefficients = f.translate(alpha, beta, shannon=shannon)

    # annotate translation point
    x, y, z = ssht.s2_to_cart(beta, alpha)
    annotation = {
        **{&#34;x&#34;: x, &#34;y&#34;: y, &#34;z&#34;: z, &#34;arrowcolor&#34;: ANNOTATION_COLOUR},
        **ARROW_STYLE,
    }
    return coefficients, filename, annotation


def _convolution_helper(
    f: Coefficients,
    g: Coefficients,
    coefficients: npt.NDArray[np.complex_ | np.float_],
    shannon: int | None,
    filename: str,
) -&gt; tuple[npt.NDArray[np.complex_ | np.float_], str]:
    &#34;&#34;&#34;
    performs the convolution specific steps
    &#34;&#34;&#34;
    g_coefficients = (
        slepian_forward(f.L, f.slepian, flm=g.coefficients)
        if hasattr(f, &#34;slepian&#34;)
        else g.coefficients
    )
    coefficients = f.convolve(g_coefficients, coefficients, shannon=shannon)

    filename += f&#34;_convolved_{g.name}&#34;
    return coefficients, filename


def _coefficients_to_field(
    f: Coefficients, coefficients: npt.NDArray[np.complex_ | np.float_]
) -&gt; npt.NDArray[np.complex_ | np.float_]:
    &#34;&#34;&#34;
    computes the field over the samples from the harmonic/Slepian coefficients
    &#34;&#34;&#34;
    return (
        slepian_inverse(coefficients, f.L, f.slepian)
        if hasattr(f, &#34;slepian&#34;)
        else ssht.inverse(
            coefficients, f.L, Reality=f.reality, Spin=f.spin, Method=SAMPLING_SCHEME
        )
    )


def compute_amplitude_for_noisy_plots(f: Coefficients) -&gt; float | None:
    &#34;&#34;&#34;
    for the noised plots fix the amplitude to the initial data
    &#34;&#34;&#34;
    return (
        np.abs(_coefficients_to_field(f, f.unnoised_coefficients)).max()
        if f.unnoised_coefficients is not None
        else None
    )


def main() -&gt; None:
    args = read_args()

    mask = create_default_region(settings) if args.region else None

    f = COEFFICIENTS[
        convert_classes_list_to_snake_case(COEFFICIENTS).index(args.function)
    ](
        args.bandlimit,
        extra_args=args.extra_args,
        region=mask,
        noise=args.noise if args.noise is not None else None,
        smoothing=args.smoothing if args.smoothing is not None else None,
    )

    g = (
        MAPS_LM[convert_classes_list_to_snake_case(MAPS_LM).index(args.convolve)](
            args.bandlimit
        )
        if isinstance(args.convolve, str)
        else None
    )

    # custom amplitude for noisy plots
    amplitude = compute_amplitude_for_noisy_plots(f)

    plot(
        f,
        g,
        alpha_pi_frac=args.alpha,
        beta_pi_frac=args.beta,
        gamma_pi_frac=args.gamma,
        annotations=args.outline,
        normalise=not args.unnormalise,
        method=args.method,
        plot_type=args.type,
        upsample=not args.unzeropad,
        earth_view=args.view,
        amplitude=amplitude,
    )


if __name__ == &#34;__main__&#34;:
    main()</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="sleplet.scripts.plotting_on_sphere.compute_amplitude_for_noisy_plots"><code class="name flex">
<span>def <span class="ident">compute_amplitude_for_noisy_plots</span></span>(<span>f: <a title="sleplet.functions.coefficients.Coefficients" href="../functions/coefficients.html#sleplet.functions.coefficients.Coefficients">Coefficients</a>) ‑> float | None</span>
</code></dt>
<dd>
<div class="desc"><p>for the noised plots fix the amplitude to the initial data</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def compute_amplitude_for_noisy_plots(f: Coefficients) -&gt; float | None:
    &#34;&#34;&#34;
    for the noised plots fix the amplitude to the initial data
    &#34;&#34;&#34;
    return (
        np.abs(_coefficients_to_field(f, f.unnoised_coefficients)).max()
        if f.unnoised_coefficients is not None
        else None
    )</code></pre>
</details>
</dd>
<dt id="sleplet.scripts.plotting_on_sphere.main"><code class="name flex">
<span>def <span class="ident">main</span></span>(<span>) ‑> None</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def main() -&gt; None:
    args = read_args()

    mask = create_default_region(settings) if args.region else None

    f = COEFFICIENTS[
        convert_classes_list_to_snake_case(COEFFICIENTS).index(args.function)
    ](
        args.bandlimit,
        extra_args=args.extra_args,
        region=mask,
        noise=args.noise if args.noise is not None else None,
        smoothing=args.smoothing if args.smoothing is not None else None,
    )

    g = (
        MAPS_LM[convert_classes_list_to_snake_case(MAPS_LM).index(args.convolve)](
            args.bandlimit
        )
        if isinstance(args.convolve, str)
        else None
    )

    # custom amplitude for noisy plots
    amplitude = compute_amplitude_for_noisy_plots(f)

    plot(
        f,
        g,
        alpha_pi_frac=args.alpha,
        beta_pi_frac=args.beta,
        gamma_pi_frac=args.gamma,
        annotations=args.outline,
        normalise=not args.unnormalise,
        method=args.method,
        plot_type=args.type,
        upsample=not args.unzeropad,
        earth_view=args.view,
        amplitude=amplitude,
    )</code></pre>
</details>
</dd>
<dt id="sleplet.scripts.plotting_on_sphere.plot"><code class="name flex">
<span>def <span class="ident">plot</span></span>(<span>f: <a title="sleplet.functions.coefficients.Coefficients" href="../functions/coefficients.html#sleplet.functions.coefficients.Coefficients">Coefficients</a>, g: <a title="sleplet.functions.coefficients.Coefficients" href="../functions/coefficients.html#sleplet.functions.coefficients.Coefficients">Coefficients</a> | None, *, alpha_pi_frac: float, beta_pi_frac: float, gamma_pi_frac: float, annotations: bool, normalise: bool, method: str, plot_type: str, upsample: bool, earth_view: str, amplitude: float | None) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>master plotting method</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def plot(
    f: Coefficients,
    g: Coefficients | None,
    *,
    alpha_pi_frac: float,
    beta_pi_frac: float,
    gamma_pi_frac: float,
    annotations: bool,
    normalise: bool,
    method: str,
    plot_type: str,
    upsample: bool,
    earth_view: str,
    amplitude: float | None,
) -&gt; None:
    &#34;&#34;&#34;
    master plotting method
    &#34;&#34;&#34;
    filename = f.name
    coefficients = f.coefficients

    # turn off annotation if needed
    logger.info(f&#34;annotations on: {annotations}&#34;)
    annotation = []

    # Shannon number for Slepian coefficients
    shannon = f.slepian.N if hasattr(f, &#34;slepian&#34;) else None

    logger.info(f&#34;plotting method: &#39;{method}&#39;&#34;)
    match method:
        case &#34;rotate&#34;:
            coefficients, filename = _rotation_helper(
                f, filename, alpha_pi_frac, beta_pi_frac, gamma_pi_frac
            )
        case &#34;translate&#34;:
            coefficients, filename, trans_annotation = _translation_helper(
                f, filename, alpha_pi_frac, beta_pi_frac, shannon
            )

            # annotate translation point
            if annotations:
                annotation.append(trans_annotation)

    if g is not None:
        coefficients, filename = _convolution_helper(
            f, g, coefficients, shannon, filename
        )

    # rotate plot of Earth
    if &#34;earth&#34; in filename:
        match earth_view:
            case &#34;africa&#34;:
                coefficients = rotate_earth_to_africa(coefficients, f.L)
                filename += &#34;_africa&#34;
            case &#34;south_america&#34;:
                coefficients = rotate_earth_to_south_america(coefficients, f.L)

    # get field value
    field = _coefficients_to_field(f, coefficients)

    # do plot
    Plot(
        field,
        f.L,
        filename,
        amplitude=amplitude,
        annotations=annotation,
        normalise=normalise,
        plot_type=plot_type,
        reality=f.reality,
        region=f.region if hasattr(f, &#34;slepian&#34;) else None,
        spin=f.spin,
        upsample=upsample,
    ).execute()</code></pre>
</details>
</dd>
<dt id="sleplet.scripts.plotting_on_sphere.read_args"><code class="name flex">
<span>def <span class="ident">read_args</span></span>(<span>) ‑> argparse.Namespace</span>
</code></dt>
<dd>
<div class="desc"><p>method to read args from the command line</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def read_args() -&gt; Namespace:
    &#34;&#34;&#34;
    method to read args from the command line
    &#34;&#34;&#34;
    parser = ArgumentParser(description=&#34;Create SSHT plot&#34;)
    parser.add_argument(
        &#34;function&#34;,
        type=valid_plotting,
        choices=convert_classes_list_to_snake_case(COEFFICIENTS),
        help=&#34;function to plot on the sphere&#34;,
    )
    parser.add_argument(
        &#34;--alpha&#34;,
        &#34;-a&#34;,
        type=float,
        default=ALPHA_DEFAULT,
        help=f&#34;alpha/phi pi fraction - defaults to {ALPHA_DEFAULT}&#34;,
    )
    parser.add_argument(
        &#34;--bandlimit&#34;, &#34;-L&#34;, type=int, default=settings[&#34;L&#34;], help=&#34;bandlimit&#34;
    )
    parser.add_argument(
        &#34;--beta&#34;,
        &#34;-b&#34;,
        type=float,
        default=BETA_DEFAULT,
        help=f&#34;beta/theta pi fraction - defaults to {BETA_DEFAULT}&#34;,
    )
    parser.add_argument(
        &#34;--convolve&#34;,
        &#34;-c&#34;,
        type=valid_maps,
        default=None,
        choices=convert_classes_list_to_snake_case(MAPS_LM),
        help=&#34;glm to perform sifting convolution with i.e. flm x glm*&#34;,
    )
    parser.add_argument(
        &#34;--extra_args&#34;,
        &#34;-e&#34;,
        type=int,
        nargs=&#34;+&#34;,
        help=&#34;list of extra args for functions&#34;,
    )
    parser.add_argument(
        &#34;--gamma&#34;,
        &#34;-g&#34;,
        type=float,
        default=0,
        help=&#34;gamma pi fraction - defaults to 0 - rotation only&#34;,
    )
    parser.add_argument(
        &#34;--method&#34;,
        &#34;-m&#34;,
        type=str,
        nargs=&#34;?&#34;,
        default=&#34;north&#34;,
        const=&#34;north&#34;,
        choices=[&#34;north&#34;, &#34;rotate&#34;, &#34;translate&#34;],
        help=&#34;plotting routine: defaults to north&#34;,
    )
    parser.add_argument(&#34;--noise&#34;, &#34;-n&#34;, type=int, help=&#34;the SNR_IN of the noise level&#34;)
    parser.add_argument(
        &#34;--outline&#34;,
        &#34;-o&#34;,
        action=&#34;store_false&#34;,
        help=&#34;flag which removes any annotation&#34;,
    )
    parser.add_argument(
        &#34;--region&#34;,
        &#34;-r&#34;,
        action=&#34;store_true&#34;,
        help=&#34;flag which masks the function for a region (based on settings.toml)&#34;,
    )
    parser.add_argument(
        &#34;--smoothing&#34;,
        &#34;-s&#34;,
        type=int,
        help=&#34;the scaling of the sigma in Gaussian smoothing of the Earth&#34;,
    )
    parser.add_argument(
        &#34;--type&#34;,
        &#34;-t&#34;,
        type=str,
        nargs=&#34;?&#34;,
        default=&#34;real&#34;,
        const=&#34;real&#34;,
        choices=[&#34;abs&#34;, &#34;real&#34;, &#34;imag&#34;, &#34;sum&#34;],
        help=&#34;plotting type: defaults to real&#34;,
    )
    parser.add_argument(
        &#34;--unnormalise&#34;,
        &#34;-u&#34;,
        action=&#34;store_true&#34;,
        help=&#34;flag turns off normalisation for plot&#34;,
    )
    parser.add_argument(
        &#34;--unzeropad&#34;,
        &#34;-z&#34;,
        action=&#34;store_true&#34;,
        help=&#34;flag turns off upsampling for plot&#34;,
    )
    parser.add_argument(
        &#34;--view&#34;,
        &#34;-v&#34;,
        type=str,
        nargs=&#34;?&#34;,
        default=&#34;south_america&#34;,
        const=&#34;south_america&#34;,
        choices=[&#34;africa&#34;, &#34;south_america&#34;],
        help=&#34;view of Earth: defaults to &#39;south_america&#39;&#34;,
    )
    return parser.parse_args()</code></pre>
</details>
</dd>
<dt id="sleplet.scripts.plotting_on_sphere.valid_maps"><code class="name flex">
<span>def <span class="ident">valid_maps</span></span>(<span>map_name: str) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>check if valid map</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def valid_maps(map_name: str) -&gt; str:
    &#34;&#34;&#34;
    check if valid map
    &#34;&#34;&#34;
    if map_name in convert_classes_list_to_snake_case(MAPS_LM):
        return map_name
    else:
        raise ValueError(f&#34;{map_name} is not a valid map to convolve&#34;)</code></pre>
</details>
</dd>
<dt id="sleplet.scripts.plotting_on_sphere.valid_plotting"><code class="name flex">
<span>def <span class="ident">valid_plotting</span></span>(<span>func_name: str) ‑> str</span>
</code></dt>
<dd>
<div class="desc"><p>check if valid function</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def valid_plotting(func_name: str) -&gt; str:
    &#34;&#34;&#34;
    check if valid function
    &#34;&#34;&#34;
    if func_name in convert_classes_list_to_snake_case(COEFFICIENTS):
        return func_name
    else:
        raise ValueError(f&#34;{func_name} is not a valid function to plot&#34;)</code></pre>
</details>
</dd>
</dl>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="sleplet.scripts" href="index.html">sleplet.scripts</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="sleplet.scripts.plotting_on_sphere.compute_amplitude_for_noisy_plots" href="#sleplet.scripts.plotting_on_sphere.compute_amplitude_for_noisy_plots">compute_amplitude_for_noisy_plots</a></code></li>
<li><code><a title="sleplet.scripts.plotting_on_sphere.main" href="#sleplet.scripts.plotting_on_sphere.main">main</a></code></li>
<li><code><a title="sleplet.scripts.plotting_on_sphere.plot" href="#sleplet.scripts.plotting_on_sphere.plot">plot</a></code></li>
<li><code><a title="sleplet.scripts.plotting_on_sphere.read_args" href="#sleplet.scripts.plotting_on_sphere.read_args">read_args</a></code></li>
<li><code><a title="sleplet.scripts.plotting_on_sphere.valid_maps" href="#sleplet.scripts.plotting_on_sphere.valid_maps">valid_maps</a></code></li>
<li><code><a title="sleplet.scripts.plotting_on_sphere.valid_plotting" href="#sleplet.scripts.plotting_on_sphere.valid_plotting">valid_plotting</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>